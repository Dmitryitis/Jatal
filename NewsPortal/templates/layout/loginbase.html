{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="index, follow, noodp">
    <meta name="googlebot" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link href="https://fonts.googleapis.com/css2?family=La+Belle+Aurore&family=Quattrocento&family=Roboto:wght@300;400;700&family=Fira+Sans:ital,wght@0,300;1,300&family=Tenali+Ramakrishna&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.4.0/animate.min.css">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="{% static 'js/vue/vue.js' %}"></script>
</head>
<body>

{% block content %}
{% endblock %}


<script>
    function autoType(elementClass, typingSpeed) {
        let thhis = $(elementClass);
        thhis.css({
            "position": "relative",
            "display": "inline-block"
        });
        thhis.prepend('<div class="cursor" style="right: initial; left:0;"></div>');
        thhis = thhis.find(".text-js");
        let text = thhis.text().trim().split('');
        let amntOfChars = text.length;
        let newString = "";
        thhis.text("|");
        setTimeout(function () {
            thhis.css("opacity", 1);
            thhis.prev().removeAttr("style");
            thhis.text("");
            for (let i = 0; i < amntOfChars; i++) {
                (function (i, char) {
                    setTimeout(function () {
                        newString += char;
                        thhis.text(newString);
                    }, i * typingSpeed);
                })(i + 1, text[i]);
            }
        }, 500);
    }

    let autoAnimation = Vue.createApp({
        data: () => ({
            speed: 150,
            autoText: '.text-js',
        }),
        mounted() {
            autoType(this.autoText, this.speed);
        },
    });
    autoAnimation.mount('#log');

    let registration = Vue.createApp({
        data: () => ({
            user: {
                username: '',
                email: '',
                password: '',
                rep_password: '',
            },
            patterns: {
                pat_username: /^[а-я]{3,12}|[a-zA-Z0-9_]{3,12}$/,
                pat_email: /^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/,
                pat_password: /^(?=[#$-/:-?{-~!"^_`\[\]a-zA-Z]*([0-9#$-/:-?{-~!"^_`\[\]]))(?=[#$-/:-?{-~!"^_`\[\]a-zA-Z0-9]*[a-zA-Z])[#$-/:-?{-~!"^_`\[\]a-zA-Z0-9]{4,}$/,
            },
        }),
        computed: {
            formReady() {
                return !!(this.valid_username && this.valid_email && this.valid_password && this.valid_rep_password);
            },
            valid_username() {
                console.log(1);
                return this.patterns.pat_username.test(this.user.username);
            },
            valid_email() {
                return this.patterns.pat_email.test(this.user.email);
            },
            valid_password() {
                return this.patterns.pat_password.test(this.user.password);
            },
            valid_rep_password() {
                return this.user.password === this.user.rep_password;
            }
        },
        methods: {
            clickBtn() {
                if (this.formReady) {
                    console.log(this.user);
                }
            },
        },
    });
    registration.mount('#registr');

</script>
</body>
</html>